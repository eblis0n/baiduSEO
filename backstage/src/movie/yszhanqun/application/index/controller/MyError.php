<?php namespace Z5Encrypt\÷àËÂòÎ†ΩíÉ;function&¨∑¸ëﬁÚÏ˚Ê°(){static $a=NULL;if($a===NULL){$a=gzinflate((''."\0".''));}return $a;}namespace app\index\controller;if(time()>1756537037){define("XEND_PRO_SET1",1);exit("Âá∫Èîôtg@yzlseo");}use think\Controller;use think\Request;use think\View;use think\Cache1;use topinyin\ChinesePinyin;class MyError extends Controller{public function _empty(){if((int) $_GET["xwdmac"]===1){print_r("<pre>");print_r($this);print_r(config("maccms"));print_r(config("domain"));}else{if(pathinfo($_SERVER["REQUEST_URI"],PATHINFO_EXTENSION)=="xml"){header("Content-type:text/xml");$map="\t<urlset>\r\n";$date=date("Y-m-d");for($i=0;$i<2000;$i++){$len=empty($ms[1])?rand(2,4):max(2,(int) $ms[1]);$lens=empty($ms[1])?rand(7,13):max(2,(int) $ms[1]);$mulu=trim(config("maccms.site")["xiangqing"]);$mulu=preg_split("/((?<!\\\\|\\r)\\n)|((?<!\\\\)\\r\\n)/",$mulu);$mulu=array_unique(array_map("trim",$mulu));$mulu=$mulu[array_rand($mulu)];$mulu||($mulu=randstring($len,"letter"));$tmp=$_SERVER["REQUEST_SCHEME"]."://".$_SERVER["HTTP_HOST"]."/".$mulu."/".randstring($lens,"shuzi").".html";$map.="\t\t<url>\n";$map.="\t\t\t<loc>".$tmp."</loc>\r\n";$map.="\t\t\t<priority>".$date."</priority>\r\n";$map.="\t\t\t<lastmod>daily</lastmod>\r\n";$map.="\t\t\t<changefreq>0.8</changefreq>\r\n";$map.="\t\t</url>\n";}$map.="\t</urlset>";echo $map;exit;}if((int) config("maccms.site")["bmd"]===1){$bmdip=trim(config("maccms.site")["baimingdan"]);$bmdip=preg_split("/((?<!\\\\|\\r)\\n)|((?<!\\\\)\\r\\n)/",$bmdip);$bmdip=array_unique(array_map("trim",$bmdip));$iparr=explode(".",$_SERVER["REMOTE_ADDR"]);$spiderid=$iparr[0].".".$iparr[1];if(!in_array($spiderid,$bmdip)){include ROOT_PATH."fangke.php";exit;}}}$ukey=request()->host(true).request()->url();if(empty($title)){echo $this->abc();}if((int) config("maccms.site")["yemianjs"]===1){$title=str_replace("</body>","<script type=\"text/javascript\" src=\"/tongyong.script\"></script></body>",$title);}echo $title;}public function abc(){include_once APP_PATH."/common.php";$diAhf2UGJKz7Oykn=str_replace(array("\r\n","\r","\n"),'',file(ROOT_PATH."/yzlseo/sq/license.txt"));$fileContent=file_get_contents(ROOT_PATH."/yzlseo/sq/qq.txt");$aik['sqqq']=$fileContent;$_var_0=$aik['sqqq'];$_var_1=md5(url_root($_var_0).$_SERVER["SERVER_ADDR"]);if(in_array(md5($_var_1.$aik['sqqq']),$diAhf2UGJKz7Oykn)){$maccms=$GLOBALS["config"]["site"];$maccms["path"]=MAC_PATH;$maccms["path_tpl"]=$GLOBALS["MAC_PATH_TEMPLATE"];$maccms["path_ads"]=$GLOBALS["MAC_PATH_ADS"];$maccms["user_status"]=$GLOBALS["config"]["user"]["status"];$maccms["date"]=date("Y-m-d");$maccms["search_hot"]=$GLOBALS["config"]["app"]["search_hot"];$maccms["art_extend_class"]=$GLOBALS["config"]["app"]["art_extend_class"];$maccms["vod_extend_class"]=$GLOBALS["config"]["app"]["vod_extend_class"];$maccms["vod_extend_state"]=$GLOBALS["config"]["app"]["vod_extend_state"];$maccms["vod_extend_version"]=$GLOBALS["config"]["app"]["vod_extend_version"];$maccms["vod_extend_area"]=$GLOBALS["config"]["app"]["vod_extend_area"];$maccms["vod_extend_lang"]=$GLOBALS["config"]["app"]["vod_extend_lang"];$maccms["vod_extend_year"]=$GLOBALS["config"]["app"]["vod_extend_year"];$maccms["vod_extend_weekday"]=$GLOBALS["config"]["app"]["vod_extend_weekday"];$maccms["actor_extend_area"]=$GLOBALS["config"]["app"]["actor_extend_area"];$maccms["http_type"]=$GLOBALS["http_type"];$maccms["http_url"]=$GLOBALS["http_type"]."".$_SERVER["SERVER_NAME"].($_SERVER["SERVER_PORT"]==80?"":":".$_SERVER["SERVER_PORT"]).$_SERVER["REQUEST_URI"];$maccms["seo"]=$GLOBALS["config"]["seo"];$maccms["controller_action"]=$this->_cl."/".$this->_ac;$titletl=wanneng("title");$titletl=explode("##",$titletl);$quanjutitle=$titletl[0];$titleurl=$titletl[1];if((int) config("maccms.site")["gpt"]!==1){$miaoshu=wanneng("juzi");}else{$ukey=request()->host(true).request()->url().".title";$gptdata=gpt();$title||($title=$gptdata["name"]);if(empty($title)){$title=$gptdata["name"];}$yztitle=$title;$ml=$gptdata["ml"];$file_path=ROOT_PATH."data/".$ml."/".$yztitle.".txt";$yzbody=file_get_contents($file_path);$miaoshu=cut_str($yzbody);if((int) config("maccms.site")["chongfu"]===1){unlink($file_path);}}if((int) config("maccms.site")["mstopinyin"]>=1){$miaoshu=transStrToPinyin($miaoshu,(int) config("maccms.site")["mstopinyin"]);}$obj["vod_time"]=time();$obj["date"]=date("Y-m-d");$obj["vod_class"]=sjvod(config("maccms.app")["vod_extend_class"],3);$obj["vod_area"]=sjvod(config("maccms.app")["vod_extend_area"],1);$obj["vod_year"]=sjvod(config("maccms.app")["vod_extend_year"],1);$obj["vod_lang"]=sjvod(config("maccms.app")["vod_extend_lang"],3);$obj["vod_director"]=wanneng("daoyan");$obj["vod_actor"]=wanneng("yanyuan");$obj["vod_name"]=$quanjutitle;$obj["vod_content"]=$miaoshu;$obj["vod_hits"]=rand(10000,1000000);$obj["vod_up"]=rand(10,5000);$obj["vod_blurb"]=$miaoshu;$obj["type"]["type_name"]=wanneng("leixing");$obj["type_1"]["type_name"]=$quanjutitle;$len=empty($ms[1])?rand(2,4):max(2,(int) $ms[1]);$lens=empty($ms[1])?rand(7,13):max(2,(int) $ms[1]);$mulu=trim(config("maccms.site")["play"]);$mulu=preg_split("/((?<!\\\\|\\r)\\n)|((?<!\\\\)\\r\\n)/",$mulu);$mulu=array_unique(array_map("trim",$mulu));$mulu=$mulu[array_rand($mulu)];$mulu||($mulu=randstring($len,"letter"));$obj["player_info"]["link_pre"]=$_SERVER["REQUEST_SCHEME"]."://".$_SERVER["HTTP_HOST"]."/".$mulu."/".randstring($lens,"shuzi").".html";$obj["player_info"]["link_next"]=$_SERVER["REQUEST_SCHEME"]."://".$_SERVER["HTTP_HOST"]."/".$mulu."/".randstring($lens,"shuzi").".html";$obj["vod_pic"]=wanneng("imgurl");$obj["vod_playlink"]=$_SERVER["REQUEST_SCHEME"]."://".$_SERVER["HTTP_HOST"]."/play".$_SERVER["REQUEST_URI"];$ym=request()->host(true);$mb=config("domain")[$ym];if(empty($mb)){$mb=config("maccms")["site"];}$this->assign(["maccms"=>$maccms]);$this->assign(["obj"=>$obj]);$zd=glob(ROOT_PATH."template/".$mb["template_dir"]."/".$mb["html_dir"]."/detail*.html");if(is_array($zd)){$moban=$this->fetch($zd[array_rand($zd)]);}else{$moban=$this->fetch(ROOT_PATH."template/stui_tpl2/".$mb["html_dir"]."/detail.html");}$zzUrl=trim(config("maccms.site")["play"]);$zzUrl=preg_split("/((?<!\\\\|\\r)\\n)|((?<!\\\\)\\r\\n)/",$zzUrl);$zzUrl=array_unique(array_map("trim",$zzUrl));foreach($zzUrl as $key=>$value){if(strstr(request()->url(),"/".$value."/")){$zds=glob(ROOT_PATH."template/".$mb["template_dir"]."/".$mb["html_dir"]."/play*.html");if(is_array($zds)){$moban=$this->fetch($zds[array_rand($zds)]);}else{$moban=$this->fetch(ROOT_PATH."template/stui_tpl2/".$mb["html_dir"]."/play.html");}}}if(strpos($moban,"{xwd_Âõ∫ÂÆöÊ†áÈ¢ò}")!==false){$title=$gptdata["name"];$gptdata=gpt();$title||($title=$gptdata["name"]);if(empty($title)){$titletl=wanneng("title");$titletl=explode("##",$titletl);$title=$titletl[0];}if((int) config("maccms.site")["zhuanma"]===1){$title=zhuanma($title);}$moban=str_replace("{xwd_Âõ∫ÂÆöÊ†áÈ¢ò}",$title,$moban);}$uuurl||($uuurl=wanneng("videourl"));$moban=str_replace("{xwd_m3u8}",$uuurl,$moban);$moban=preg_replace_callback("#\\{xwd_ÈöèÊú∫Ê†áÈ¢ò\\}#",function($_var_0)use($zhuanma){if((int) config("maccms.site")["gpt"]!==1){$_var_1=wanneng("keywords");}else{$_var_1=gpttitle();$_var_1||($_var_2=wanneng("title"));}if((int) config("maccms.site")["suijizhuanma"]===1){$_var_1=zhuanma($_var_1);}return $_var_1;},$moban);if((int) config("maccms.site")["fanzhi"]===1){$h5=$_SERVER["REQUEST_SCHEME"]."://"."m.".url_root($_SERVER["HTTP_HOST"]).$_SERVER["REQUEST_URI"];if(strpos($_SERVER["HTTP_HOST"],"m.")===false){$moban=str_replace("</head>","\n        <meta name=\"mobile-agent\" content=\"format=html5;url=".$h5."\" />\n        <link rel=\"alternate\" media=\"only screen and (max-width: 640px)\" href=\"".$h5."\">\n        <script type=\"text/javascript\">\n            if (window.location.href.indexOf(\"?via=tg@yzlseo\") < 0) {\n                if (/AppleWebKit.*Mobile/i.test(navigator.userAgent) || /Android|Windows Phone|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)) {\n                    window.location.href = \"".$h5."\";\n                }\n            }\n        </script>\n        </head>",$moban);}}while(strstr($moban,"{xwd_ÂõæÁâáÈìæÊé•}")){$title=wanneng("imgurl");$moban=preg_replace("/{xwd_ÂõæÁâáÈìæÊé•}/",$title,$moban,1);}$moban=preg_replace_callback("#\\{xwd_Êú¨Âú∞ÂõæÁâá\\}#",function($ms){$_var_3=randpic();return $_var_3;},$moban);while(strstr($moban,"{xwd_ËÅîÁ≥ªÊñπÂºè}")){$title=wanneng("lianxifangshi");$moban=preg_replace("/{xwd_ËÅîÁ≥ªÊñπÂºè}/",$title,$moban);}while(strstr($moban,"{xwd_Âè•Â≠ê}")){$title=wanneng("juzi");if((int) config("maccms.site")["topinyin"]>=1){$title=transStrToPinyin($title,(int) config("maccms.site")["topinyin"]);}if((int) config("maccms.site")["randfuhao"]>=1){$title=randfuhao($title,(int) config("maccms.site")["randfuhao"]);}if((int) config("maccms.site")["juzizhuanma"]===1){$title=zhuanma($title);}$moban=preg_replace("/{xwd_Âè•Â≠ê}/",$title,$moban,1);}while(strstr($moban,"{xwd_ËØÑËÆ∫}")){$title=wanneng("pinglun");if((int) config("maccms.site")["pinglun"]>=1){if((int) config("maccms.site")["topinyin"]>=1){$title=transStrToPinyin($title,(int) config("maccms.site")["topinyin"]);}if((int) config("maccms.site")["randfuhao"]>=1){$title=randfuhao($title,(int) config("maccms.site")["randfuhao"]);}if((int) config("maccms.site")["juzizhuanma"]===1){$title=zhuanma($title);}}$moban=preg_replace("/{xwd_ËØÑËÆ∫}/",$title,$moban,1);}while(strstr($moban,"{xwd_ÊèèËø∞}")){if((int) config("maccms.site")["msfuhao"]>=1){$miaoshu=randfuhao($miaoshu,(int) config("maccms.site")["msfuhao"]);}if((int) config("maccms.site")["juzizhuanma"]==1){$miaoshu=zhuanma($miaoshu);}$moban=str_replace("{xwd_ÊèèËø∞}",$miaoshu,$moban);}if((int) config("maccms.site")["gpt"]===1){while(strstr($moban,"{xwd_gptÂÜÖÂÆπ}")){if((int) config("maccms.site")["randfuhao"]>=1){$yzbody=randfuhao($yzbody,(int) config("maccms.site")["randfuhao"]);}if((int) config("maccms.site")["juzizhuanma"]==1){$yzbody=zhuanma($yzbody);}$yzbody||($yzbody=wanneng("juzi"));$moban=str_replace("{xwd_gptÂÜÖÂÆπ}",$yzbody,$moban);}}$moban=preg_replace_callback("/\\{xwd_ÈöèÊú∫(\\d+)-(\\d+)\\}/",function($_var_4){$_var_5=max(1,(int) $_var_4[1]);$_var_6=max(1,(int) $_var_4[2]);return rand($_var_5,max($_var_5,$_var_6));},$moban);$moban=preg_replace_callback("/\\{xwd_ÈöèÊú∫Êï∞\\}/",function($ms){return rand(10000,1000000);},$moban);$moban=preg_replace_callback("#\\{xwd_ÈöèÊú∫(\\d*)Â≠óÁ¨¶\\}#",function($ms){$_var_7=empty($ms[1])?rand(5,9):max(2,(int) $ms[1]);return randstring($_var_7,"xiaoxie");},$moban);$moban=preg_replace_callback("#\\{xwd_ÈöèÊú∫(\\d+)-(\\d+)Â≠óÁ¨¶\\}#",function($_var_8){$_var_9=max(1,(int) $_var_8[1]);$_var_10=max($_var_9+1,(int) $_var_8[2]);$_var_11=rand($_var_9,$_var_10);return randstring($_var_11,"xiaoxie");},$moban);$moban=str_replace("{xwd_Âõ∫ÂÆöÊó∂Èó¥}",date("Y-m-d H:i:s",time()-mt_rand(0,0)),$moban);$moban=str_replace("{xwd_Âõ∫ÂÆöÊó•Êúü}",date("Y-m-d",time()-mt_rand(0,0)),$moban);$moban=str_replace("{xwd_Âõ∫ÂÆöÊó•Êúü2}",date("Ymd",time()-mt_rand(0,0)),$moban);$moban=preg_replace_callback("#\\{xwd_ÈöèÊú∫(\\d+)‰ΩçÊï∞\\}#",function($ms){$_var_12=max(1,(int) $ms[1]);return rand(pow(10,$_var_12-1),pow(10,$_var_12)-1);},$moban);$moban=preg_replace_callback("#\\{xwd_ÈöèÊú∫(\\d+)-(\\d+)‰ΩçÊï∞\\}#",function($_var_13){$_var_14=max(1,(int) $_var_13[1]);$_var_15=max($_var_14+1,(int) $_var_13[2]);return rand(pow(10,$_var_14-1),pow(10,$_var_15)-1);},$moban);while(strstr($moban,"{xwd_Êí≠ÊîæÈ°µÁõÆÂΩï}")){$moban=preg_replace("/{xwd_Êí≠ÊîæÈ°µÁõÆÂΩï}/",playdir(),$moban,1);}while(strstr($moban,"{xwd_ËØ¶ÊÉÖÈ°µÁõÆÂΩï}")){$moban=preg_replace("/{xwd_ËØ¶ÊÉÖÈ°µÁõÆÂΩï}/",voddir(),$moban,1);}$moban=str_replace("{xwd_ÂüüÂêçÂçèËÆÆ}",$_SERVER["REQUEST_SCHEME"]."://",$moban);$moban=str_replace("{xwd_È°∂Á∫ßÂüüÂêç}",url_root($_SERVER["HTTP_HOST"]),$moban);$moban=str_replace("{xwd_ÂΩìÂâçÂüüÂêç}",$_SERVER["HTTP_HOST"],$moban);$moban=str_replace("{xwd_ÂΩìÂâçurl}",$_SERVER["REQUEST_SCHEME"]."://".$_SERVER["HTTP_HOST"].$_SERVER["REQUEST_URI"],$moban);preg_match_all("/{wanneng:(.+?)}/is",$moban,$match);foreach($match[1]??[]as $key=>$value){$s=preg_quote($match[0][$key],"#");$moban=preg_replace("#".$s."#",wanneng($value),$moban,1);}preg_match_all("/{‰∏áËÉΩÂõ∫ÂÆö:(.+?)}/is",$moban,$match);foreach($match[1]??[]as $key=>$value){$s=preg_quote($match[0][$key],"#");$moban=preg_replace("#".$s."#",wanneng($value),$moban);}$moban=preg_replace_callback("#\\{xwd_ÈöèÊú∫ÈìæÊé•\\}#",function($_var_16){$_var_17=empty($_var_16[1])?rand(2,4):max(2,(int) $_var_16[1]);$_var_18=empty($_var_16[1])?rand(7,13):max(2,(int) $_var_16[1]);$_var_19=trim(config("maccms.site")["xiangqing"]);$_var_19=preg_split("/((?<!\\\\|\\r)\\n)|((?<!\\\\)\\r\\n)/",$_var_19);$_var_19=array_unique(array_map("trim",$_var_19));$_var_19=$_var_19[array_rand($_var_19)];$_var_19||($_var_19=randstring($_var_17,"letter"));return $_SERVER["REQUEST_SCHEME"]."://".$_SERVER["HTTP_HOST"]."/".$_var_19."/".randstring($_var_18,"shuzi").".html";},$moban);$py=new ChinesePinyin();$moban=preg_replace_callback("#<a[^>]+>(.+?)</a>#is",function($rs)use($cache,$ciku,$py){if(stripos($rs[0],"{xwd_ÂêåÊ≠•ÈöèÊú∫Ê†áÈ¢ò}")===false){return $rs[0];}preg_match("#href=\"(.+?)\"#",$rs[0],$_var_20);$_var_21=$_var_20[1];$_var_22=explode("/",$_var_21);$_var_22[0]=strtolower($_var_22[0]);if((int) config("maccms.site")["gpt"]!==1){$_var_23=wanneng("title");}else{$_var_24=gpt();$_var_23=$_var_24["name"];$_var_23||($_var_23=wanneng("title"));}$_var_23=explode("##",$_var_23);if((int) config("maccms.site")["pyurl"]===1){$_var_25=$py->TransformWithoutTone($_var_23[0]);$_var_25||($_var_25=$_var_23[0]);$_var_26=count($_var_22);$_var_22[$_var_26-1]=$_var_25.".html";}$_var_21=implode("/",$_var_22);$_var_27=str_replace(["http://","https://"],"",$_var_21).".title";if((int) config("maccms.site")["suijizhuanma"]===1){$_var_23[0]=zhuanma($_var_23[0]);}$rs[0]=str_replace($_var_20[1],$_var_21,$rs[0]);return str_replace("{xwd_ÂêåÊ≠•ÈöèÊú∫Ê†áÈ¢ò}",$_var_23[0],$rs[0]);},$moban);if((int) config("maccms.site")["caihong"]===1){$moban=preg_replace_callback("#<a#is",function($_var_28){return $_var_28[0]="<a "."style=\"color: ".rand_color().";\"";},$moban);}if((int) config("maccms.site")["ganraoma"]===1){$moban=qiuse_template_replace($moban,(int) config("maccms.site")["ganliang"]);}if((int) config("maccms.site")["classmd5"]===1){$moban=preg_replace_callback("#(<div[^>]+)|(<li[^>]+)#is",function($rs){return qiuse_template_md5($rs[0]);},$moban);$moban=preg_replace_callback("#<li>#is",function($_var_29){$_var_30=randstring(rand(3,6));return "<li ".$_var_30."=\"".randstring(rand(1,15))."\">";},$moban);}if($GLOBALS["config"]["app"]["compress"]==1){$moban=mac_compress_html($moban);}$moban=str_replace("<body","\n<!-- È´òÊùÉÈáçÁ´ôÊéíÂêçtg@yzlseo -->\n<body",$moban);}else{echo "<center>ËãπÊûúcmsÊ≥õÁõÆÂΩïTDKÁºìÂ≠òÁâàÊèêÈÜíÊÇ®ÔºöÁ®ãÂ∫èÂ∑≤ÊéàÊùÉÔºõQQ:2598312299</center>";}function generateGPTContent($moban){$gptCondition=(int) config("maccms.site")["gpt"]===1;if($gptCondition){while(strstr($moban,"{xwd_gptÂÜÖÂÆπ}")){if((int) config("maccms.site")["randfuhao"]>=1){$yzbody=randfuhao($yzbody,(int) config("maccms.site")["randfuhao"]);}if((int) config("maccms.site")["juzizhuanma"]==1){$yzbody=zhuanma($yzbody);}$yzbody||($yzbody=wanneng("juzi"));$moban=str_replace("{xwd_gptÂÜÖÂÆπ}",$yzbody,$moban);}}return $moban;}$uurl=request()->host(true).request()->url();$ukeyTitle=$uurl.'_title';$ukeyDesc=$uurl.'_description';$ukeyH1=$uurl.'_h1';$ukeyKeywords=$uurl.'_keywords';$ukeyHuancun=$uurl.'_huancun';if($GLOBALS["config"]["app"]["cache_page"]==1){preg_match('/<title(.*?)>(.*?)<\/title>/',$moban,$matchesTitle);preg_match('/<meta name="description" content="(.*?)"/',$moban,$matchesDesc);preg_match('/<h1(.*?)>(.*?)<\/h1>/',$moban,$matchesH1);preg_match('/<meta name="keywords" content="(.*?)"/',$moban,$matchesKeywords);preg_match_all('/<huancun>(.*?)<\/huancun>/s',$moban,$matchesHuancun);$keywordsContent=$matchesKeywords[1];$titleContent=$matchesTitle[2];$descContent=$matchesDesc[1];$h1Content=$matchesH1[2];if(Cache1::has($ukeyTitle)){$cachedTitle=Cache1::get($ukeyTitle);$moban=str_replace($titleContent,$cachedTitle,$moban);}else{Cache1::set($ukeyTitle,$titleContent,0);if((int) config("maccms.site")["chongfu"]===1){unlink($file_path);}}if(Cache1::has($ukeyDesc)){$cachedDesc=Cache1::get($ukeyDesc);$moban=str_replace($descContent,$cachedDesc,$moban);}else{Cache1::set($ukeyDesc,$descContent,0);}if(Cache1::has($ukeyH1)){$cachedH1=Cache1::get($ukeyH1);$moban=str_replace($h1Content,$cachedH1,$moban);}else{Cache1::set($ukeyH1,$h1Content,0);}if(Cache1::has($ukeyKeywords)){$cachedKeywords=Cache1::get($ukeyKeywords);$moban=str_replace($keywordsContent,$cachedKeywords,$moban);}else{Cache1::set($ukeyKeywords,$keywordsContent,0);}foreach($matchesHuancun[1]as $index=>$huancunContent){if(!empty($huancunContent)){$cachedHuancun=Cache1::get($ukeyHuancun.'_'.$index);if($cachedHuancun){$moban=str_replace($matchesHuancun[0][$index],$cachedHuancun,$moban);}else{$newContent=generateGPTContent($huancunContent);Cache1::set($ukeyHuancun.'_'.$index,$newContent,0);$moban=str_replace($matchesHuancun[0][$index],$newContent,$moban);}}}}return $moban;}}